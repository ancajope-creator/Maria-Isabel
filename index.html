<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dedicatoria</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #fff;
            font-family: 'Press Start 2P', cursive;
            overflow: hidden;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="%23fff" opacity="0.5"/></svg>'), auto;
        }
        
        #intro {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><linearGradient id="lake" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23000;stop-opacity:1" /><stop offset="100%" style="stop-color:%230004;stop-opacity:1" /></linearGradient></defs><rect width="100" height="100" fill="url(%23lake)"/><circle cx="20" cy="70" r="10" fill="%230033" opacity="0.3"/><circle cx="80" cy="80" r="15" fill="%230033" opacity="0.3"/><rect x="0" y="90" width="100" height="10" fill="%230022"/></svg>') center/cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transition: opacity 1s ease-out;
        }
        
        #intro::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(0,50,100,0.3) 0%, rgba(0,0,0,0.8) 100%);
        }
        
        #click-prompt {
            position: relative;
            z-index: 2;
            font-size: 1.2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            animation: pulse 2s infinite;
            cursor: pointer;
            padding: 1rem;
            border: 2px dashed #fff;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        #click-prompt:hover {
            background: rgba(255,255,255,0.1);
            transform: scale(1.05);
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        #message {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            box-sizing: border-box;
            z-index: 10;
        }
        
        #message-text {
            font-size: 1rem;
            line-height: 1.6;
            max-width: 800px;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px #333;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffd700;
            border-radius: 50%;
            pointer-events: none;
            animation: float 6s infinite linear;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        audio {
            display: none;
        }
    </style>
</head>
<body>
    <audio id="bg-music" loop>
        <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.wav" type="audio/wav">
        <!-- Nota: Reemplaza con una URL de canción retro real, como un archivo MIDI o MP3 de dominio público -->
    </audio>
    
    <div id="intro">
        <div id="click-prompt">PRESIONA AQUÍ</div>
    </div>
    
    <div id="message">
        <div id="message-text">
            Maria: La caja musical que tienes en tus manos es más que un objeto; es un abrazo en forma de melodía, un recordatorio de que siempre hay una canción para alegrar tu corazón, incluso en los días más grises. Cada nota que suena lleva consigo el deseo de que encuentres paz y alegría. Que su música te envuelva como un susurro de esperanza, recordándote lo especial que eres y lo mucho que iluminas el mundo a tu alrededor. ¡Que esta melodía te acompañe siempre! Recibe un fuerte abrazo de oso
        </div>
    </div>
    
    <script>
        const audio = document.getElementById('bg-music');
        const intro = document.getElementById('intro');
        const message = document.getElementById('message');
        const clickPrompt = document.getElementById('click-prompt');
        
        // Iniciar música de fondo al cargar (requiere interacción del usuario en algunos navegadores)
        window.addEventListener('load', () => {
            audio.play().catch(e => console.log('Autoplay prevented'));
        });
        
        clickPrompt.addEventListener('click', () => {
            // Iniciar música si no está reproduciéndose
            if (audio.paused) {
                audio.play();
            }
            
            // Ocultar intro y mostrar mensaje
            intro.style.opacity = '0';
            setTimeout(() => {
                intro.style.display = 'none';
                message.style.display = 'flex';
                createParticles();
            }, 1000);
        });
        
        function createParticles() {
            for (let i = 0; i < 100; i++) { // Muchísimos paticos (100 partículas)
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + 'vw';
                    particle.style.animationDelay = Math.random() * 6 + 's';
                    particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                    message.appendChild(particle);
                    
                    // Remover partícula después de la animación
                    setTimeout(() => {
                        particle.remove();
                    }, 6000);
                }, i * 50); // Espaciar la creación
            }
            
            // Crear partículas continuamente
            setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.animationDelay = '0s';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                message.appendChild(particle);
                
                setTimeout(() => {
                    particle.remove();
                }, 6000);
            }, 200);
        }
    </script>
</body>
</html>
